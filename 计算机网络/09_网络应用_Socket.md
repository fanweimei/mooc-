1. 应用编程接口API：就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口
2. Socket API
    - 最初设计
        - 面向BSD
        - 面向TCP/IP协议栈接口
    - 目前
        - 事实上的工业标准
        - 绝大多数操作系统都支持
    - Internet网络应用嘴典型的API接口
    - 通信模型
        - 客户/服务器
    - 应用进程间通信的抽象机制
        - 标识通信端点（对外）
            - IP地址+端口号
        - 操作系统/进程如何管理套接字(对内)
            - 套接字描述符
            - 类似于文件的抽象
            - 当应用进程创建套接字时，操作系统分配一个数据结构存储该套接字相关信息
            - 使用TCP/IP协议簇
3. WinSocket
    - WSAStartup(初始化Windows Sockets API)
        - 使用Socket的应用程序在使用Socket之前必须首先调用
    - 应用程序
        - 创建套接字
            - 第一个参数协议族
            - 第二个参数套接字类型
                - TCP: SOCK_STREAM
                    - 可靠、面向连接、字节流传输、点对点
                - UDP: SOCK_DGRAM
                    - 不可靠、无连接、数据报传输
                - IP/ICMP网络层：SOCK_RAW（直接操作网络层）
            - 第三个参数协议号
        - 操作系返回套接字描述符
        - bind：int bind(sd, localaddr, addrlen)
            - 绑定套接字的本地端口地址
            - 客户端程序一般不必调用bind函数
             - 一个服务器有多个地址
                - INADDR_ANY：地址通配符
        - listen: int listen(sd, quequesize)
            - 置服务器端的流套接字处于监听状态
        - connect: connect(sd, saddr, saddrlen)
            - 客户程序调用connect函数来使客户套接字与特定计算机的特定端口的套接字进行连接
            - 仅用于客户端
        - accept: accept(sd, caddr, caddrlen)
            - 利用新创建的套接字与客户通信
        - send, sendto
            - send用在使用了TCP或调用了connect的UDP
            - sendto用在没有调用connect的UDP
        - recv, recvfrom
            - recv同send
            - recvfrom用于无连接模式的接收数据，同sendto
        - setsocket/getsocket
        - 关闭套接字：int closesocket(SOCKET sd)
            - 关闭一个描述为sd的套接字
            - 如果多个进程共享一个套接字
            - 调用closesocket将套接字引用计数减1，减至0才关闭
            - 一个进程中的多线程对一个套接字的使用无计数
    - WSACleanup(释放所使用的Windows Sockets DLL)
        - 释放Socket库所占用的系统资源
4. 关于网络字节顺序
    - TCP/IP定义了标准的用于协议头中的二进制整数表示：网络字节顺序
5. 基于Socket客户端程序软件设计
    - 需要解决的问题
        - 解析服务器IP地址
            - 需要将域名或IP地址转换为32IP地址
                - inet_addr()实现点分十进制IP地址到32位IP地址转换
                - gethostbyname()实现域名到32位IP地址转换
        - 解析服务器端口号
                - 客户端可能使用服务名(如HTTP)标识服务器端口
                    - 需要将服务名转换为熟知端口号
                        - 函数getservbyname()
        - 解析协议号
            - 客户端可能使用协议名(如TCP)
            - 需要将协议名转换为协议号
                - getprotobyname()函数
    - TCP客户端软件流程
        - 确定服务器IP地址与客户端
        - 创建套接字
        - （分配本地端点地址）
        - 连接服务器
        - 遵循应用层协议进行通信
        - 关闭/释放连接
    - UDP客户端软件流程
        - 确定服务器IP和端口号
        - 创建套接字
        - （分配本地端点地址）
        - 指定服务器端点地址，构造UDP数据报
        - 遵循应用层协议进行通信
        - 关闭/释放套接字
    - 客户端软件的实现
        - 设计connectsock底层函数 
6. 基于Socket的服务端软件程序设计
    - 4种类型基本服务器
        - 循环无连接
            - 创建套接字
            - 绑定端点地址（INADDR_ANY+端口号）
            - 反复接收来自客户端的请求
            - 遵循应用层协议，构造响应报文，发送给客户
            - 无连接服务器使用sendto()函数发送数据报
            - 调用recvfrom()函数接收数据时，自动提取客户端点地址
        - 循环面向连接
            - 创建套接字，并绑定熟知端口号
            - 设置套接字为被动监听模式，准备用于服务
            - 调用accept()函数接收下一个连接请求
            - 遵循应用层协议，范伟接收客户请求，构造并发送响应
            - 完成为特定客户服务后，关闭与该客户之间的连接
        - 并发无连接
            - 主线程：创建套接字、绑定端口
            - 主线程：反复调用recvfrom()函数，接收下一个客户请求，并创建新线程处理该客户响应
            - 子线程：接收一个特定请求
            - 子线程：依据应用层协议构造响应报文，并调用sendto发送
            - 子线程：退出
        - 并发面向连接
            - 主线程：创建主套接字，绑定端口
            - 主线程：监听模式
            - 主线程：反复调用accept()函数接收下一个连接请求，创建一个新的子线程处理该客户响应
            - 子线程：接收客户请求
            - 进行交互
            - 关闭/释放
    - 服务器的实现



    